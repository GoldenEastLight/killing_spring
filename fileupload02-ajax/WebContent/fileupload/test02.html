<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<script
	src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>
<body>
	<form id="fileForm">
		<input type="text" name="msg">
		<input type="file" name="attach" multiple>
		<button type="button">전송</button>
	</form>

	<script>
		$("button").click(function () {
			/*
			// 데이터 전송을 위한 객체 생성
			let fd = new FormData();
// 			fd.append("mode", "mod");
			fd.append("msg", $("input[name='msg']").val());
			
			let files = $("input[name='attach']")[0].files;
			for (let i = 0; i < files.length; i++) {
				fd.append("attach", files[i]);
			}
			*/
			// fileForm에 있는거 외에 뭘 더 덧붙이거나 할땐 위 /**/주석 안에 있는 것 처럼 하는거고,
			// fileForm에 있는걸 그대로 가져올 때엔 이렇게 한줄로 쓰는게 좋다.
			let fd = new FormData($("#fileForm")[0]);
			
			// ajax 방식으로 파일 업로드시 추가할 2가지 속성
			// 1. processData: false
			// 2. contentType: false
			$.ajax({
				url: "test.do",
				data: fd,
				type: "POST",
				processData: false,
				contentType: false,
				success: function () {
					alert("AJAX 파일 업로드 성공");
				}
			});
		});
	</script>
</body>
</html>